{"version":3,"sources":["webpack:///webpack/bootstrap 603c1192f7ca9e177ddf","webpack:///./src/util/utilities.js","webpack:///./src/sparrow.js","webpack:///./src/util/environment.js","webpack:///./src/app.js","webpack:///./src/observer/queue.js","webpack:///./src/observer/watcher.js","webpack:///./src/dom/element.js","webpack:///./src/dom/form.js","webpack:///./src/error/error.js","webpack:///./src/event.js","webpack:///./src/observer/dispatcher.js","webpack:///./src/observer/observer.js","webpack:///./src/observer/scheduler.js","webpack:///./src/promise/promise.js","webpack:///./src/util/registry.js","webpack:///./src/index.js"],"names":["nullFunction","Utilities","data","path","def","indexOf","paths","split","key","shift","has","get","join","value","set","remove","arr","element","length","index","splice","Array","isArray","isObject","hasOwnProperty","object","enumerable","Object","defineProperty","writable","configurable","toReturn","i","flatObject","flattenObject","x","$","isPlainObject","test","toString","string","str","charCodeAt","method","target","arg","len","arguments","call","apply","zepto","isZ","plugin","Sparrow","options","el","Error","domready","document","ready","$options","$mount","app","init","name","fn","customOptions","$this","extend","_name","prototype","$createElement","createElement","Promise","inBrowser","window","UA","navigator","userAgent","toLowerCase","isIE","isIE9","isEdge","isAndroid","isIOS","proxy","proxyMethod","defaultOptions","uid","Application","id","watcher","watchers","currentWatcher","watcherStack","elements","_isMounted","registry","instance","$data","event","observerFactory","hook","initState","mount","error","warn","$el","isJquery","selector","map","update","forceUpdate","callback","$element","find","html","text","isFormElement","attr","watch","biding","oldValue","ctrl","eventName","delegate","self","handler","on","val","outerHTML","substr","tagName","onShow","onHide","toggleHandler","valueBool","wrapper","execute","forEach","user","push","immediate","unwatch","teardown","refresh","nextTick","resolve","then","pop","initData","methods","initMethods","computed","initComputed","initWatchers","isReserved","create","bind","watches","setter","getter","cache","lazy","getCachedValue","source","proxyGetter","proxySetter","chain","methodName","r","TaskQueue","pending","tasks","getHandler","_resolve","slice","task","isNative","p","catch","console","err","setTimeout","MutationObserver","counter","observer","textNode","createTextNode","String","observe","characterData","deep","sync","deferred","Watcher","active","expression","dispatcherIds","dispatchers","newDisptacherIds","newDisptachers","pushStack","popStack","resetDispatchers","run","scheduler","enqueueWatcher","defer","k","addDispatcher","dispatcher","detach","temp","attach","removeElement","removeDispatcher","attrs","content","ele","setAttribute","addContent","append","Element","appendChild","each","FormHelper","tag","INPUT","SELECT","TEXTAREA","filter","prop","ErrorHandler","message","format","log","EventHandler","events","listen","n","off","args","Dispatcher","undefined","Observer","define","hasProto","arrayProto","replaceMethods","ObserverFactory","__observer__","replaceArrayMethods","isExtensible","keys","reactive","Math","max","ob","notify","property","getOwnPropertyDescriptor","childObserver","attachArray","newValue","arrayMethods","original","mutator","result","inserted","__proto__","State","WAITING","RUNNING","maxCircularNumber","Scheduler","queue","state","circular","setState","sort","a","b","reset","PromiseAdapter","Deferred","reject","when","onFulfilled","onRejected","promises","promise","v","reason","Registry","store","jQuery","Zepto"],"mappings":"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","file":"sparrow.common.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 603c1192f7ca9e177ddf","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nimport Sparrow from \"../sparrow\";\r\n\r\nexport default class Utilities {\r\n  static get (data, path, def) {\r\n    if (path.indexOf('.') !== -1) {\r\n      let paths = path.split('.');\r\n      let key = paths.shift();\r\n\r\n      if (!Utilities.has(data, key)) {\r\n        return def;\r\n      }\r\n\r\n      return Utilities.get(data[key], paths.join('.'), def);\r\n    }\r\n\r\n    return Utilities.has(data, path) ? data[path] : def;\r\n  }\r\n\r\n  static set (data, path, value) {\r\n    if (path.indexOf('.') !== -1) {\r\n      let paths = path.split('.');\r\n      let key = paths.shift();\r\n\r\n      if (!Utilities.has(data, key)) {\r\n        data[key] = {};\r\n      }\r\n\r\n      data[key] = Utilities.set(data[key], paths.join('.'), value);\r\n\r\n      return data;\r\n    }\r\n\r\n    data[path] = value;\r\n\r\n    return data;\r\n  }\r\n\r\n  static remove (data, path) {\r\n    if (path.indexOf('.') !== -1) {\r\n      let paths = path.split('.');\r\n      let key = paths.shift();\r\n\r\n      if (!Utilities.has(data, key)) {\r\n        return data;\r\n      }\r\n\r\n      Utilities.remove(data[key], paths.join('.'));\r\n\r\n      return data;\r\n    }\r\n\r\n    remove(data, path);\r\n\r\n    return data;\r\n  }\r\n\r\n  static removeElement (arr, element) {\r\n    if (arr.length) {\r\n      const index = arr.indexOf(element);\r\n      if (index > -1) {\r\n        return arr.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  static has (data, key) {\r\n    if (Array.isArray(data)) {\r\n      return typeof data[key] !== 'undefined';\r\n    } else if (Utilities.isObject(data)) {\r\n      return data.hasOwnProperty(key);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  static define (object, key, value, enumerable = true) {\r\n    Object.defineProperty(object, key, {\r\n      value: value,\r\n      enumerable: enumerable,\r\n      writable: true,\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  static flatten (data) {\r\n    const toReturn = {};\r\n\r\n    for (let i in data) {\r\n      if (!data.hasOwnProperty(i)) continue;\r\n\r\n      if ((typeof data[i]) == 'object') {\r\n        let flatObject = flattenObject(data[i]);\r\n        for (let x in flatObject) {\r\n          if (!flatObject.hasOwnProperty(x)) {\r\n            continue;\r\n          }\r\n\r\n          toReturn[i + '.' + x] = flatObject[x];\r\n        }\r\n      } else {\r\n        toReturn[i] = data[i];\r\n      }\r\n    }\r\n\r\n    return toReturn;\r\n  }\r\n\r\n  static isObject (data) {\r\n    return typeof data === 'object' && data !== null;\r\n  }\r\n\r\n  static isPlainObject (data) {\r\n    return Sparrow.$.isPlainObject(data);\r\n  }\r\n\r\n  static isNative (object) {\r\n    return /native code/.test(object.toString());\r\n  }\r\n\r\n  static isReserved (string) {\r\n    const str = (string + '').charCodeAt(0);\r\n    return str === '$' || str === '_';\r\n  }\r\n\r\n  static bind (method, target) {\r\n    return (function (arg) {\r\n      const len = arguments.length;\r\n      if (len === 1) {\r\n        return method.call(target, arg);\r\n      } else if (len === 0) {\r\n        return method.call(target);\r\n      }\r\n\r\n      return method.apply(target, arguments);\r\n    });\r\n  }\r\n\r\n  static isJquery (object) {\r\n    if (!Utilities.isObject(object)) {\r\n      return false;\r\n    }\r\n\r\n    return object instanceof Sparrow.$ || 'jquery' in object || Sparrow.$.zepto.isZ(object);\r\n  }\r\n}\r\n\r\nfunction remove (data, key) {\r\n  if (Array.isArray(data)) {\r\n    if (data.length) {\r\n      data.splice(key, 1);\r\n    }\r\n\r\n    return data;\r\n  } else if (Utilities.isObject(data)) {\r\n    delete data[key];\r\n\r\n    return data;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function nullFunction () {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/utilities.js","   \r\n                           \r\n  \r\n                                                                      \r\n                                    \r\n   \r\n\r\nimport Application from './app';\r\nimport createElement from './dom/element';\r\n\r\nconst plugin = \"sparrow\";\r\n\r\nexport default class Sparrow {\r\n  constructor (options = {}, $ = null) {\r\n    let el = null;\r\n    $ = $ || Sparrow.$;\r\n\r\n    if (!$) {\r\n      throw new Error('Sparrow.$ is NULL, please set jQuery or Zepto object into it.');\r\n    }\r\n\r\n    if (options.domready) {\r\n      el = options.el;\r\n      options.el = null;\r\n\r\n      $(document).ready($ => {\r\n        this.$options.el = el;\r\n        this.$mount(el);\r\n      });\r\n    }\r\n\r\n    this.app = new Application($);\r\n    this.app.init(this, options);\r\n  }\r\n\r\n  static set $(value) {\r\n    Object.defineProperty(Sparrow, '$', {\r\n      value: value\r\n    });\r\n\r\n    Sparrow.$._name = ('zepto' in Sparrow.$) ? 'Zepto' : 'jQuery';\r\n\r\n    Sparrow.plugin(plugin);\r\n  }\r\n\r\n  static plugin (name, options = {}) {\r\n    const $ = Sparrow.$;\r\n\r\n    if (!$) {\r\n      throw new Error('Sparrow.$ is NULL, please set jQuery or Zepto object into it.');\r\n    }\r\n\r\n    if (typeof $.fn === 'undefined') {\r\n      $('body');                 \r\n      throw new Error('Sparrow.$.fn not exists, are you sure you inject a jQuery / Zepto object?');\r\n    }\r\n\r\n    $.fn[name] = function (customOptions) {\r\n      const $this = $(this[0]);\r\n\r\n      if (!$this.data(name)) {\r\n        options = $.extend(true, {}, options, customOptions);\r\n        options.el = $this;\r\n\r\n        $this.data(name, new Sparrow(options));\r\n      }\r\n\r\n      return $this.data(name);\r\n    };\r\n  }\r\n}\r\n\r\nSparrow.prototype.$createElement = Sparrow.createElement = createElement;\r\nSparrow.Promise = Application.Promise;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/sparrow.js","   \n                           \n  \n                                                  \n                          \n   \n\n                               \nexport const inBrowser = typeof window !== 'undefined';\nexport const UA = inBrowser && window.navigator.userAgent.toLowerCase();\nexport const isIE = UA && /msie|trident/.test(UA);\nexport const isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nexport const isEdge = UA && UA.indexOf('edge/') > 0;\nexport const isAndroid = UA && UA.indexOf('android') > 0;\nexport const isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/environment.js","   \r\n                           \r\n  \r\n                                                                      \r\n                                    \r\n   \r\n\r\nimport { ObserverFactory } from './observer/observer';\r\nimport Watcher from \"./observer/watcher\";\r\nimport Registry from \"./util/registry\";\r\nimport Scheduler from \"./observer/scheduler\";\r\nimport TaskQueue from \"./observer/queue\";\r\nimport ErrorHandler from \"./error/error\";\r\nimport Utilities, { nullFunction } from \"./util/utilities\";\r\nimport PromiseAdapter from \"./promise/promise\";\r\nimport EventHandler from \"./event\";\r\nimport FormHelper from \"./dom/form\";\r\n\r\n   \r\n                   \r\n  \r\n                 \r\n   \r\nconst defaultOptions = {\r\n  data: {}\r\n};\r\n\r\nlet uid = 0;\r\n\r\nexport default class Application {\r\n  constructor ($) {\r\n    this.id = ++uid;\r\n    this.$ = $;\r\n    this.watcher = null;\r\n    this.watchers = [];\r\n    this.currentWatcher = null;\r\n    this.watcherStack = [];\r\n    this.elements = {};\r\n\r\n    this._isMounted = false;\r\n\r\n    this.registry = new Registry(this, {\r\n      'observerFactory': new ObserverFactory(this),\r\n      'scheduler': new Scheduler(this),\r\n      'error': new ErrorHandler,\r\n      'event': new EventHandler(this)\r\n    });\r\n  }\r\n\r\n  init(instance, options = {}) {\r\n    this.options = this.$.extend({}, defaultOptions, options);\r\n    this.data = options.data;\r\n    this.instance = instance;\r\n\r\n                                       \r\n    instance.$ = this.$;\r\n    instance.$data = this.options.data;\r\n    instance.$options = this.options;\r\n    proxyMethod(instance, this, 'find');\r\n    proxyMethod(instance, this, 'async');\r\n    proxyMethod(instance, this, 'mount', true);\r\n    proxyMethod(instance, this, 'bind', true);\r\n    proxyMethod(instance, this, 'on', true);\r\n    proxyMethod(instance, this, 'model', true);\r\n    proxyMethod(instance, this, 'show', true);\r\n    proxyMethod(instance, this, 'wrap', true);\r\n    proxyMethod(instance, this, 'watch', true);\r\n    proxyMethod(instance, this, 'nextTick');\r\n    proxyMethod(instance, this, 'forceUpdate', true);\r\n    proxyMethod(instance, this.event, 'listen', true);\r\n    proxyMethod(instance, this.event, 'off', true);\r\n    proxyMethod(instance, this.event, 'once', true);\r\n    proxyMethod(instance, this.event, 'emit', true);\r\n    proxyMethod(instance, this.observerFactory, 'set', true);\r\n    proxyMethod(instance, this.observerFactory, 'delete', true);\r\n\r\n    this.hook('beforeCreate');\r\n\r\n    initState(this);\r\n\r\n                \r\n    this.hook('created');\r\n\r\n    if (options.el) {\r\n      this.mount(options.el);\r\n    }\r\n\r\n                                                \r\n  }\r\n\r\n  mount (el) {\r\n    if (this._isMounted) {\r\n      this.error.warn('This app has been already mounted.');\r\n      return;\r\n    }\r\n\r\n    this.hook('beforeMount');\r\n\r\n    const $el = Utilities.isJquery(el) ? el : this.$(el);\r\n\r\n    if ($el.length === 0) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        const str = $el.selector ? $el.selector : $el[0] + '';\r\n        this.error.warn(`Can not mount ${str}, element not found. Consider change selector or call after \"domready\".`);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    this.instance.$el = this.$el;\r\n\r\n    this._isMounted = true;\r\n\r\n    this.hook('configure');\r\n\r\n    this.hook('mounted');\r\n\r\n    this.watcher = new Watcher(this, function () {\r\n      this.app.watchers.map(watcher => watcher.update());\r\n    }, nullFunction);\r\n\r\n    this.forceUpdate();\r\n  }\r\n\r\n  forceUpdate () {\r\n    if (this.watcher) {\r\n      this.watcher.update();\r\n    }\r\n  }\r\n\r\n  hook (name) {\r\n    if (this.options.hasOwnProperty(name) && typeof this.options[name] === 'function') {\r\n      this.options[name].call(this.instance);\r\n    }\r\n  }\r\n\r\n  bind (selector, key, callback) {\r\n    const $element = this.find(selector);\r\n\r\n                       \r\n    if (typeof callback === 'string') {\r\n      const name = callback;\r\n      callback = ($element, value) => {\r\n        switch (name) {\r\n          case ':html':\r\n            $element.html(value);\r\n            break;\r\n\r\n          case ':text':\r\n            $element.text(value);\r\n            break;\r\n\r\n          case ':value':\r\n            if (FormHelper.isFormElement($element)) {\r\n              FormHelper.update($element);\r\n            }\r\n            break;\r\n          default:\r\n            $element.attr(name, value);\r\n        }\r\n      };\r\n    }\r\n\r\n    this.watch(key, function biding (value, oldValue, ctrl) {\r\n      callback.call(this.instance, $element, value, oldValue, ctrl);\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  on (selector, eventName, callback, delegate = false) {\r\n    const $element = this.find(selector);\r\n    let self = this;\r\n\r\n    const handler = function (event) {\r\n      callback.call(self.instance, self.$(this), event);\r\n    };\r\n\r\n    if (delegate) {\r\n      this.$el.on(eventName, selector, handler);\r\n    } else {\r\n      $element.on(eventName, handler);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  model (selector, key, delegate = false) {\r\n    const handler = function ($element, event) {\r\n      let value;\r\n      switch ($element.attr('type')) {\r\n        case 'radio':\r\n          value = $element[0].value;\r\n          break;\r\n        default:\r\n          value = $element.val();\r\n      }\r\n\r\n      return Utilities.set(this.$data, key, value);\r\n    };\r\n\r\n    const $element = this.find(selector);\r\n\r\n    if (process.env.NODE_ENV === 'development' && !FormHelper.isFormElement($element)) {\r\n      this.error.warn(\r\n        'Please only use two-way-binding on input, select or textarea elements. The element you selected: ' +\r\n        $element[0].outerHTML.substr(0, 50) + '...'\r\n      );\r\n    }\r\n\r\n    this.watch(function () {\r\n      const value = Utilities.get(this.$data, key);\r\n      if ($element.val() !== value) {\r\n        FormHelper.update($element, value);\r\n      }\r\n    }, nullFunction);\r\n\r\n    this.on(selector, 'change', handler, delegate);\r\n\r\n    if ($element[0].tagName !== 'SELECT') {\r\n      this.on(selector, 'input', handler, delegate);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  show (selector, key, onShow = null, onHide = null) {\r\n    const $element = this.find(selector);\r\n\r\n    if (onShow !== null) {\r\n      onHide = onHide || onShow;\r\n    }\r\n\r\n    onShow = onShow || 'show';\r\n    onHide = onHide || 'hide';\r\n\r\n    const toggleHandler = ((handler) => {\r\n      return (() => {\r\n        if (typeof handler === 'string') {\r\n          if (process.env.NODE_ENV === 'development' && typeof $element[handler] !== 'function') {\r\n            this.error.error(`Method: ${handler}() not found in ${Sparrow.$._name} object.`);\r\n          }\r\n\r\n          return () => $element[handler]();\r\n        } else if (typeof handler === 'function') {\r\n          return (value, oldValue, ctrl) => handler.call(this.instance, $element, value, oldValue, ctrl);\r\n        }\r\n      })();\r\n    });\r\n\r\n    const handler = function (value, oldValue, ctrl) {\r\n      const valueBool = (value == true || value != 0);\r\n\r\n      if (valueBool != (oldValue == true || oldValue != 0)) {\r\n        if (valueBool) {\r\n          toggleHandler(onShow)(value, oldValue, ctrl);\r\n        } else {\r\n          toggleHandler(onHide)(value, oldValue, ctrl);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.watch(key, handler);\r\n\r\n    return this;\r\n  }\r\n\r\n  wrap (selector, handler) {\r\n    const $element = this.find(selector);\r\n    const self = this;\r\n    const wrapper = {\r\n      execute: function () {\r\n        handler.call(this, $element, this);\r\n      }\r\n    };\r\n\r\n    ['bind', 'on', 'model', 'show'].forEach(function (method) {\r\n      wrapper['$' + method] = function () {\r\n        self[method]($element, ...arguments);\r\n        return this;\r\n      };\r\n    });\r\n\r\n    wrapper.execute($element);\r\n\r\n    return this;\r\n  }\r\n\r\n  watch (path, callback, options = {}) {\r\n    options.user = true;\r\n\r\n    const watcher = new Watcher(this, path, callback, options);\r\n    this.watchers.push(watcher);\r\n\r\n    if (options.immediate) {\r\n      callback.call(this.instance, watcher.get());\r\n    }\r\n\r\n    return (function unwatch () {\r\n      watcher.teardown();\r\n    });\r\n  }\r\n\r\n  find (selector, refresh = false) {\r\n    if (typeof selector === 'object' && !Utilities.isJquery(selector)) {\r\n      return this.$(selector);\r\n    }\r\n\r\n    if (selector === 'string') {\r\n      if (!this.elements.hasOwnProperty(selector) || refresh) {\r\n        this.elements[selector] = this.$el.find(selector);\r\n      }\r\n\r\n      return this.elements[selector];\r\n    }\r\n\r\n    return this.$(selector);\r\n  }\r\n\r\n  nextTick (callback) {\r\n    return TaskQueue.nextTick(callback);\r\n  }\r\n\r\n  async (handler) {\r\n    return new Application.Promise(resolve => {\r\n      Application.Promise.resolve()\r\n        .then(handler)\r\n        .then((value) => resolve(value))\r\n    });\r\n  }\r\n\r\n  pushStack (watcher) {\r\n    if (this.currentWatcher) {\r\n      this.watcherStack.push(this.currentWatcher);\r\n    }\r\n\r\n    this.currentWatcher = watcher;\r\n  }\r\n\r\n  popStack () {\r\n    this.currentWatcher = this.watcherStack.pop();\r\n  }\r\n}\r\n\r\nfunction initState (app) {\r\n                     \r\n  initData(app, app.options.data);\r\n\r\n  if (app.options.methods) {\r\n    initMethods(app, app.options.methods);\r\n  }\r\n\r\n  if (app.options.computed) {\r\n    initComputed(app, app.options.computed);\r\n  }\r\n\r\n  if (app.options.watch) {\r\n    initWatchers(app, app.options.watch);\r\n  }\r\n}\r\n\r\nfunction initData (app, data) {\r\n                                  \r\n  for (let key in data) {\r\n    if (!Utilities.isReserved(key)) {\r\n      proxy(app.instance, data, key);\r\n    }\r\n  }\r\n\r\n  app.observerFactory.create(data);\r\n}\r\n\r\nfunction initMethods (app, methods) {\r\n  for (let key in methods) {\r\n    const method = methods[key];\r\n    if (!app.options.data[key] && typeof method === 'function') {\r\n                                \r\n      app.instance[key] = Utilities.bind(method, app.instance);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initWatchers (app, watches) {\r\n  for (let key in watches) {\r\n    let handler = watches[key];\r\n    let options;\r\n\r\n    if (Utilities.isPlainObject(handler)) {\r\n      options = handler;\r\n      handler = handler.handler;\r\n    }\r\n\r\n    if (typeof handler === 'string') {\r\n      handler = app[handler];\r\n    }\r\n\r\n    app.watch(key, handler, options);\r\n  }\r\n}\r\n\r\nfunction initComputed (app, computed) {\r\n  for (let key in computed) {\r\n    const handler = computed[key];\r\n    let setter = nullFunction;\r\n    let getter;\r\n    let cache;\r\n\r\n    getter = typeof handler === 'function' ? handler : handler.get;\r\n    getter = Utilities.bind(getter, app.instance);\r\n\r\n    const watcher = new Watcher(app, key, getter, {lazy: true});\r\n\r\n    if (!app.hasOwnProperty(key)) {\r\n\r\n      if (typeof handler !== 'function') {\r\n        setter = handler.set;\r\n        cache  = handler.cache;\r\n        getter = cache === false ? nullFunction : function () {\r\n          return watcher.getCachedValue();\r\n        };\r\n      }\r\n\r\n      setter = Utilities.bind(setter, app.instance);\r\n\r\n      Object.defineProperty(app.data, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: getter,\r\n        set: setter\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport function proxy (target, source, key) {\r\n  Object.defineProperty(target, key, {\r\n    get: function proxyGetter () {\r\n      return source[key]\r\n    },\r\n    set: function proxySetter (value) {\r\n      source[key] = value;\r\n    }\r\n  });\r\n}\r\n\r\nexport function proxyMethod (target, source, key, chain = false) {\r\n  const methodName = '$' + key;\r\n  target[methodName] = function (...args) {\r\n    const r = source[key](...args);\r\n\r\n    return chain ? target : r;\r\n  }\r\n}\r\n\r\nApplication.Promise = PromiseAdapter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nimport { nullFunction } from \"../util/utilities\";\r\nimport Utilities from \"../util/utilities\";\r\nimport { isIOS } from \"../util/environment\";\r\nimport Application from \"../app\";\r\n\r\nconst TaskQueue = {\r\n  pending: false,\r\n  tasks: [],\r\n  handler: null,\r\n  nextTick: function (callback, target, app) {\r\n    const handler = this.getHandler();\r\n\r\n    let _resolve;\r\n    this.tasks.push(() => {\r\n      if (callback) {\r\n        callback.call(target);\r\n      }\r\n\r\n      if (_resolve) {\r\n        _resolve(target);\r\n      }\r\n    });\r\n\r\n    if (!this.pending) {\r\n      this.pending = true;\r\n\r\n      if (app) {\r\n        app.hook('beforeUpdate');\r\n      }\r\n\r\n      handler();\r\n    }\r\n\r\n    if (!callback && typeof Promise !== 'undefined') {\r\n      return Application.Promise(resolve => {\r\n        _resolve = resolve;\r\n      });\r\n    }\r\n  },\r\n  execute: function () {\r\n    TaskQueue.pending = false;\r\n    const tasks = TaskQueue.tasks.slice(0);\r\n    TaskQueue.tasks.length = 0;\r\n\r\n    tasks.forEach(task => task());\r\n  },\r\n     \r\n                                                                              \r\n     \r\n  getHandler: function () {\r\n    if (typeof this.handler !== 'function') {\r\n                                                                                   \r\n                                                            \r\n                                                                              \r\n                                                                             \r\n                                                                               \r\n                                              \r\n                              \r\n      if (typeof Promise !== 'undefined' && Utilities.isNative(Promise)) {\r\n        const p = Promise.resolve();\r\n        this.handler = () => {\r\n          p.then(this.execute).catch(err => console.error(err));\r\n\r\n                                                                                  \r\n                                                                                  \r\n                                                                                 \r\n                                                                               \r\n                                                                                \r\n          if (isIOS) {\r\n            setTimeout(nullFunction);\r\n          }\r\n        };\r\n      } else if (typeof MutationObserver !== 'undefined' && (\r\n          Utilities.isNative(MutationObserver) ||\r\n                                  \r\n          MutationObserver.toString() === '[object MutationObserverConstructor]'\r\n        )) {\r\n                                                                      \r\n                                                 \r\n        let counter = 1;\r\n        const observer = new MutationObserver(this.execute);\r\n        const textNode = document.createTextNode(String(counter));\r\n        observer.observe(textNode, {\r\n          characterData: true\r\n        });\r\n        this.handler = () => {\r\n          counter = (counter + 1) % 2;\r\n          textNode.data = String(counter)\r\n        }\r\n      } else {\r\n                                 \r\n                                  \r\n        this.handler = () => {\r\n          setTimeout(this.execute, 0);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.handler;\r\n  }\r\n};\r\n\r\nexport default TaskQueue;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer/queue.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\nimport Utilities from \"../util/utilities\";\r\n\r\nlet uid = 0;\r\n\r\nconst defaultOptions = {\r\n  deep: false,\r\n  user: false,\r\n  sync: false,\r\n  computed: false,\r\n  deferred: false\r\n};\r\n\r\nexport default class Watcher {\r\n  constructor (app, path, callback, options = {}) {\r\n    this.options = app.$.extend({}, defaultOptions, options);\r\n\r\n    this.id   = ++uid;\r\n    this.path = path;\r\n    this.callback = callback;\r\n    this.app = app;\r\n    this.active = true;\r\n    this.ctrl = null;\r\n    this.deep = this.options.deep;\r\n    this.user = this.options.user;\r\n    this.sync = this.options.sync;\r\n    this.computed = this.options.computed;\r\n    this.deferred = this.options.deferred;\r\n    this.expression = process.env.NODE_ENV === 'development' ? path + '' : '';\r\n    this.dispatcherIds = [];\r\n    this.dispatchers = [];\r\n    this.newDisptacherIds = [];\r\n    this.newDisptachers = [];\r\n\r\n    if (typeof this.path === 'function') {\r\n      this.getter = this.path;\r\n    } else {\r\n      this.getter = function (value) {\r\n        return Utilities.get(value, path);\r\n      }\r\n    }\r\n\r\n                                                          \r\n  }\r\n\r\n  get () {\r\n    this.app.pushStack(this);\r\n\r\n    let value;\r\n\r\n    value = this.getter.call(this.app.instance, this.app.data);\r\n\r\n                 \r\n\r\n    this.app.popStack();\r\n\r\n    this.resetDispatchers();\r\n\r\n    return value;\r\n  }\r\n\r\n  update (ctrl = null) {\r\n    this.ctrl = ctrl;\r\n\r\n    if (this.computed) {\r\n      this.deferred = true;\r\n    } else if (this.sync) {\r\n      this.run();\r\n    } else {\r\n      this.app.scheduler.enqueueWatcher(this);\r\n    }\r\n  }\r\n\r\n  run () {\r\n    if (this.active) {\r\n      const value = this.get();\r\n\r\n      if (value !== this.value || this.deep || Utilities.isObject(value)) {\r\n        const oldValue = this.value;\r\n        this.value = value;\r\n\r\n        this.callback.call(this.app.instance, value, oldValue, this.ctrl);\r\n      }\r\n    }\r\n\r\n    this.ctrl = null;\r\n  }\r\n\r\n  getCachedValue () {\r\n    if (this.defer) {\r\n      this.get();\r\n      this.defer = false;\r\n    }\r\n\r\n                                                                      \r\n    if (this.app.currentWatcher) {\r\n      for (let k in this.watcher.dispatchers) {\r\n        this.app.currentWatcher.addDispatcher(this.dispatchers[k]);\r\n      }\r\n    }\r\n\r\n    return this.value;\r\n  }\r\n\r\n  resetDispatchers () {\r\n    this.dispatchers.map(dispatcher => {\r\n      if (this.newDisptacherIds.indexOf(dispatcher.id) === -1) {\r\n        dispatcher.detach(this);\r\n      }\r\n    });\r\n\r\n    let temp;\r\n    temp = this.newDisptachers;\r\n    this.dispatchers = this.newDisptachers;\r\n    this.newDisptachers = temp;\r\n    this.newDisptachers.length = 0;\r\n\r\n    temp = this.newDisptacherIds;\r\n    this.dispatcherIds = this.newDisptacherIds;\r\n    this.newDisptacherIds = temp;\r\n    this.newDisptacherIds.length = 0;\r\n  }\r\n\r\n  addDispatcher(dispatcher) {\r\n    const id = dispatcher.id;\r\n\r\n    if (this.newDisptacherIds.indexOf(id) === -1) {\r\n      this.newDisptacherIds.push(id);\r\n      this.newDisptachers.push(dispatcher);\r\n\r\n      if (this.dispatcherIds.indexOf(id) === -1) {\r\n        dispatcher.attach(this);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeDispatcher (dispatcher) {\r\n    Utilities.removeElement(this.dispatchers, dispatcher);\r\n    dispatcher.detach(this);\r\n  }\r\n\r\n  teardown () {\r\n    this.dispatchers.map(dispatcher => {\r\n      this.removeDispatcher(dispatcher);\r\n      Utilities.removeElement(this.watchers, this);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer/watcher.js","   \r\n                           \r\n  \r\n                                                                      \r\n                                    \r\n   \r\n\r\nimport Utilities from \"../util/utilities\";\r\nimport Sparrow from \"../sparrow\";\r\n\r\nexport default function createElement (name, attrs = {}, content = null) {\r\n  const ele = document.createElement(name);\r\n\r\n  for (let key in attrs) {\r\n    const value = attrs[key];\r\n\r\n    ele.setAttribute(key, value);\r\n  }\r\n\r\n  addContent(ele, content);\r\n\r\n  return ele;\r\n}\r\n\r\nfunction addContent (ele, content) {\r\n  if (content !== null) {\r\n    if (typeof content === 'string' || typeof content === 'number') {\r\n      ele.append(content);\r\n    } else if (content instanceof Element) {\r\n      ele.appendChild(content);\r\n    } else if (content instanceof Sparrow.$ || Utilities.isJquery(content)) {\r\n      content.each(function () {\r\n        ele.appendChild(this);\r\n      });\r\n    } else if (Array.isArray(content) || typeof content === 'object') {\r\n      for (let k in content) {\r\n        addContent(ele, content[k]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/element.js","   \r\n                           \r\n  \r\n                                                                      \r\n                                    \r\n   \r\nimport Utilities from \"../util/utilities\";\r\n\r\nexport default class FormHelper {\r\n  static isFormElement ($element) {\r\n    const tag = Utilities.isJquery($element) ? $element[0].tagName : $element.tagName;\r\n\r\n    return [FormHelper.INPUT, FormHelper.SELECT, FormHelper.TEXTAREA].indexOf(tag) !== -1;\r\n  }\r\n\r\n  static update ($element, value) {\r\n    const method = 'update' + $element[0].tagName;\r\n\r\n    FormHelper[method]($element, value);\r\n  }\r\n\r\n  static updateINPUT($element, value) {\r\n    switch ($element.attr('type')) {\r\n      case 'radio':\r\n      case 'checkbox':\r\n        $element.filter(`[value=${value}]`).prop('checked', true);\r\n        break;\r\n      default:\r\n        $element.val(value);\r\n    }\r\n  }\r\n\r\n  static updateTEXTAREA($element, value) {\r\n    $element.val(value);\r\n  }\r\n\r\n  static updateSELECT($element, value) {\r\n    $element.val(value);\r\n  }\r\n}\r\n\r\nFormHelper.INPUT = 'INPUT';\r\nFormHelper.SELECT = 'SELECT';\r\nFormHelper.TEXTAREA = 'TEXTAREA';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/form.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nexport default class ErrorHandler {\r\n  constructor (app) {\r\n    this.app = app;\r\n  }\r\n\r\n  warn (message) {\r\n    console.warn(this.format(message));\r\n  }\r\n\r\n  error (message) {\r\n    console.error(this.format(message));\r\n  }\r\n\r\n  log (message) {\r\n    console.log(this.format(message));\r\n  }\r\n\r\n  format (message) {\r\n    return `[Sparrow]: ${message}`;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/error.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nexport default class EventHandler {\r\n  constructor (app) {\r\n    this.app = app;\r\n    this.events = {};\r\n  }\r\n\r\n  listen (name, callback) {\r\n    if (Array.isArray(name)) {\r\n      name.map(n => this.listen(n, callback));\r\n      return this;\r\n    }\r\n\r\n    if (!this.events.hasOwnProperty(name)) {\r\n      this.events[name] = [];\r\n    }\r\n\r\n    this.events[name].push(callback);\r\n\r\n    return this;\r\n  }\r\n\r\n  once (name, callback) {\r\n    const fn = () => {\r\n      const r = callback.apply(this.app.instance, arguments);\r\n\r\n      this.off(name);\r\n\r\n      return r;\r\n    };\r\n\r\n    return this.listen(name, fn);\r\n  }\r\n\r\n  off (name = null, callback = null) {\r\n    if (name === null) {\r\n      this.events = {};\r\n    } else if (Array.isArray(name)) {\r\n      name.map(n => this.listen(n, callback));\r\n      return this;\r\n    }\r\n\r\n    if (!this.events.hasOwnProperty(name)) {\r\n      return this;\r\n    }\r\n\r\n    if (callback === null) {\r\n      this.events[name] = [];\r\n    } else if (typeof callback === 'function' && Array.isArray(this.events[name])) {\r\n      for (let k in this.events[name]) {\r\n        const fn = this.events[name][k];\r\n\r\n        if (fn === callback) {\r\n          this.events[name].splice(k, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  emit (name, ...args) {\r\n    if (!this.events.hasOwnProperty(name)) {\r\n      return this;\r\n    }\r\n\r\n    if (!Array.isArray(this.events[name])) {\r\n      return this;\r\n    }\r\n\r\n    for (let k in this.events[name]) {\r\n      const callback = this.events[name][k];\r\n      callback.call(this.app.instance, ...args);\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/event.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nimport Watcher from './watcher';\r\nimport Utilities from \"../util/utilities\";\r\n\r\nlet uid = 0;\r\n\r\n   \r\n                     \r\n   \r\nexport default class Dispatcher {\r\n     \r\n                \r\n                             \r\n                                  \r\n     \r\n  constructor (app, watchers = []) {\r\n    this.id = ++uid;\r\n    this.watchers = watchers;\r\n    this.app = app;\r\n  }\r\n\r\n     \r\n                 \r\n                             \r\n     \r\n  attach (watcher) {\r\n    this.watchers.push(watcher);\r\n  }\r\n\r\n     \r\n                    \r\n                             \r\n                          \r\n     \r\n  detach (watcher) {\r\n    Utilities.removeElement(this.watchers, watcher);\r\n\r\n    watcher.removeDispatcher();\r\n\r\n    return this;\r\n  }\r\n\r\n     \r\n                                    \r\n     \r\n  attachCurrent () {\r\n    if (this.app.currentWatcher) {\r\n      this.app.currentWatcher.addDispatcher(this);\r\n    }\r\n  }\r\n\r\n     \r\n                                              \r\n    \r\n                         \r\n     \r\n  notify (ctrl = undefined) {\r\n    this.watchers.forEach(watcher => watcher.update(ctrl));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer/dispatcher.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\n\r\nimport Utilities from '../util/utilities';\r\nimport Dispatcher from './dispatcher';\r\n\r\n   \r\n                   \r\n   \r\nexport default class Observer {\r\n     \r\n                \r\n    \r\n                             \r\n                                   \r\n     \r\n  constructor (value, dispatcher) {\r\n    this.value = value;\r\n    this.dispatcher = dispatcher;\r\n\r\n    Utilities.define(value, '__observer__', this, false);\r\n  }\r\n}\r\n\r\nconst hasProto = '__proto__' in {};\r\nconst arrayProto = Array.prototype;\r\nconst replaceMethods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'splice',\r\n  'sort',\r\n  'reverse'\r\n];\r\n\r\nexport class ObserverFactory {\r\n     \r\n                \r\n    \r\n                             \r\n     \r\n  constructor (app) {\r\n    this.app = app;\r\n  }\r\n\r\n     \r\n                            \r\n    \r\n                     \r\n    \r\n                           \r\n     \r\n  create (value) {\r\n    if (!Utilities.isObject(value)) {\r\n      return null;\r\n    }\r\n\r\n    let observer;\r\n\r\n    if (!value.hasOwnProperty('__observer__') && value.__observer__ instanceof Observer) {\r\n      observer = value.__observer__;\r\n    } else if (Array.isArray(value)) {\r\n      observer = new Observer(value, new Dispatcher(this.app));\r\n\r\n      this.replaceArrayMethods(value);\r\n\r\n      value.forEach(val => this.create(val));\r\n    } else if (Utilities.isPlainObject(value) && Object.isExtensible(value)) {\r\n      observer = new Observer(value, new Dispatcher(this.app));\r\n\r\n      Object.keys(value).forEach((key) => this.reactive(value, key, value[key]));\r\n    }\r\n\r\n    return observer;\r\n  }\r\n\r\n     \r\n                                             \r\n    \r\n                           \r\n                        \r\n                          \r\n    \r\n                 \r\n     \r\n  set (object, key, value) {\r\n    if (Array.isArray(object)) {\r\n      object.length = Math.max(object.length, key);\r\n      object.splice(key, 1, value);\r\n      return value;\r\n    }\r\n\r\n    if (Utilities.has(object, key)) {\r\n      object[key] = value;\r\n      return value;\r\n    }\r\n\r\n    const ob = object.__observer__;\r\n    if (!ob) {\r\n      ob[key] = value;\r\n      return value;\r\n    }\r\n\r\n    this.reactive(object, key, value);\r\n    ob.dispatcher.notify();\r\n    return value;\r\n  }\r\n\r\n     \r\n                     \r\n    \r\n                           \r\n                        \r\n     \r\n  delete (object, key) {\r\n    if (Array.isArray(object)) {\r\n      object.splice(key, 1);\r\n      return;\r\n    }\r\n\r\n    const ob = object.__observer__;\r\n\r\n    if (!Utilities.has(object, key)) {\r\n      return;\r\n    }\r\n\r\n    delete object[key];\r\n\r\n    if (!ob) {\r\n      return\r\n    }\r\n\r\n    ob.dispatcher.notify();\r\n  }\r\n\r\n     \r\n                           \r\n    \r\n                                                                                       \r\n                                                                 \r\n    \r\n                           \r\n                        \r\n                          \r\n     \r\n  reactive (object, key, value) {\r\n    const property = Object.getOwnPropertyDescriptor(object, key);\r\n    const dispatcher = new Dispatcher(this.app);\r\n    const self = this;\r\n\r\n    if (property && property.configurable === false) {\r\n      return;\r\n    }\r\n\r\n    const getter = property && property.get;\r\n    const setter = property && property.set;\r\n\r\n    let childObserver = this.create(value);\r\n\r\n    Object.defineProperty(object, key, {\r\n      get: function () {\r\n        value = getter ? getter.call(object) : value;\r\n\r\n          \r\n                                                                                                  \r\n                                                          \r\n           \r\n        if (self.app.currentWatcher) {\r\n          self.app.currentWatcher.addDispatcher(dispatcher);\r\n\r\n                                                                                      \r\n          if (childObserver) {\r\n            self.app.currentWatcher.addDispatcher(childObserver.dispatcher);\r\n          }\r\n\r\n          if (Array.isArray(value)) {\r\n            self.attachArray(value);\r\n          }\r\n        }\r\n\r\n        return value;\r\n      },\r\n      set: function (newValue) {\r\n        const oldValue = getter ? getter.call(object) : value;\r\n\r\n        if (newValue === oldValue || (newValue !== newValue && oldValue !== oldValue)) {\r\n          return;\r\n        }\r\n\r\n        if (setter) {\r\n          setter.call(object, newValue);\r\n        } else {\r\n          value = newValue;\r\n        }\r\n\r\n        childObserver = self.create(newValue);\r\n\r\n        dispatcher.notify();\r\n      }\r\n    });\r\n  }\r\n\r\n     \r\n                             \r\n                         \r\n     \r\n  attachArray (value = []) {\r\n    for (let key in value) {\r\n      const ele = value[key];\r\n      ele && ele.__observer__ && this.app.currentWatcher.addDispatcher(ele.__observer__.dispatcher);\r\n\r\n      if (Array.isArray(ele)) {\r\n        this.attachArray(ele);\r\n      }\r\n    }\r\n  }\r\n\r\n     \r\n                                            \r\n                         \r\n                     \r\n     \r\n  replaceArrayMethods (value) {\r\n    const self = this;\r\n    const arrayMethods = Object.create(arrayProto);\r\n\r\n    replaceMethods.forEach(function (method) {\r\n                              \r\n      const original = arrayProto[method];\r\n\r\n      Utilities.define(arrayMethods, method, function mutator () {\r\n        let i = arguments.length;\r\n        const args = new Array(i);\r\n\r\n        while (i--) {\r\n          args[i] = arguments[i]\r\n        }\r\n\r\n        const result = original.apply(this, args);\r\n        const ob = this.__observer__;\r\n\r\n        let inserted;\r\n\r\n        switch (method) {\r\n          case 'push':\r\n            inserted = args;\r\n            break;\r\n          case 'unshift':\r\n            inserted = args;\r\n            break;\r\n          case 'splice':\r\n            inserted = args.slice(2);\r\n            break;\r\n        }\r\n\r\n        if (inserted) {\r\n          self.create(inserted);\r\n        }\r\n\r\n                        \r\n        ob.dispatcher.notify({\r\n          method: method,\r\n          args: args\r\n        });\r\n\r\n        return result;\r\n      });\r\n    });\r\n\r\n    if (hasProto) {\r\n      value.__proto__ = arrayMethods;\r\n      return value;\r\n    }\r\n\r\n    arrayMethods.forEach((method, key) => Utilities.define(value, key, method));\r\n    return value;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer/observer.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\nimport TaskQueue from \"./queue\";\r\n\r\nconst State = {\r\n  WAITING: 'waiting',\r\n  RUNNING: 'running'\r\n};\r\n\r\nconst maxCircularNumber = 1000;\r\n\r\nexport default class Scheduler {\r\n  constructor (app) {\r\n    this.app = app;\r\n    this.queue = [];\r\n    this.watchers = {};\r\n    this.index = 0;\r\n    this.state = State.WAITING;\r\n    this.circular = [];\r\n  }\r\n\r\n  setState (state) {\r\n    this.state = state;\r\n  }\r\n\r\n  is (state) {\r\n    return this.state === state;\r\n  }\r\n\r\n  enqueueWatcher (watcher) {\r\n                                            \r\n    if (!this.watchers[watcher.id]) {\r\n      this.watchers[watcher.id] = true;\r\n\r\n      switch (this.state) {\r\n        case State.WAITING:\r\n          this.queue.push(watcher);\r\n\r\n          this.setState(State.RUNNING);\r\n\r\n          TaskQueue.nextTick(this.execute, this, this.app);\r\n          break;\r\n\r\n        case State.RUNNING:\r\n                                                                        \r\n                                                                     \r\n          let i = this.queue.length - 1;\r\n\r\n          while (i >= 0 && this.queue[i].id > watcher.id) {\r\n            i--\r\n          }\r\n\r\n          this.queue.splice(Math.max(i, this.index) + 1, 0, watcher);\r\n      }\r\n    }\r\n  }\r\n\r\n  execute () {\r\n                               \r\n                         \r\n                                                                                \r\n                                   \r\n                                                                                \r\n                                                              \r\n                                                                              \r\n                                      \r\n    this.queue.sort((a, b) => a.id - b.id);\r\n\r\n                                                                \r\n                                  \r\n    for (this.index = 0; this.index < this.queue.length; this.index++) {\r\n      const watcher = this.queue[this.index];\r\n      this.watchers[watcher.id] = null;\r\n      watcher.run();\r\n\r\n                                                       \r\n      if (process.env.NODE_ENV === 'development' && this.watchers[watcher.id] != null) {\r\n        this.circular[id] = (this.circular[id] || 0) + 1;\r\n        if (this.circular[id] > maxCircularNumber) {\r\n          this.app.error.warn(\r\n            `Infinite loop for max 1000 times for key: ${watcher.path} ` +\r\n            `and expression: ${watcher.expression}`\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.reset();\r\n  }\r\n\r\n  reset () {\r\n    this.queue.length = 0;\r\n    this.watchers = {};\r\n    this.circular = {};\r\n    this.setState(State.WAITING);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer/scheduler.js","   \r\n                           \r\n  \r\n                                                  \r\n                          \r\n   \r\nimport Utilities from \"../util/utilities\";\r\nimport Sparrow from \"../sparrow\";\r\n\r\nexport default class PromiseAdapter {\r\n  constructor (callback) {\r\n    const deferred = Sparrow.$.Deferred();\r\n    const resolve = deferred.resolve;\r\n    const reject = deferred.reject;\r\n\r\n    callback(resolve, reject);\r\n\r\n    this.defer = Sparrow.$.when(deferred);\r\n  }\r\n\r\n  then (onFulfilled, onRejected) {\r\n    return this.defer.then(onFulfilled, onRejected);\r\n  }\r\n\r\n  catch (onRejected) {\r\n    return this.defer.catch(onRejected);\r\n  }\r\n\r\n  static all (promises) {\r\n    return Sparrow.$.when(...promises);\r\n  }\r\n\r\n  static race (promises) {\r\n    let _resolve;\r\n\r\n    return new PromiseAdapter(resolve => {\r\n      _resolve = resolve;\r\n\r\n      promises.map(promise => {\r\n        promise.then((v) => {\r\n          if (_resolve) {\r\n            resolve(v);\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  static resolve (object) {\r\n    if (object instanceof PromiseAdapter) {\r\n      object.defer.resolve();\r\n\r\n      return object;\r\n    }\r\n\r\n    const promise = new PromiseAdapter(resolve => resolve(object));\r\n\r\n    if (Utilities.isObject(object) && object.hasOwnProperty('then')) {\r\n      return promise.then(object.then);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  static reject (reason) {\r\n    return new PromiseAdapter((resolve, reject) => reject(reason));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/promise/promise.js","   \n                           \n  \n                                                  \n                          \n   \n\nexport default class Registry {\n  constructor (app, store = {}) {\n    this.app = app;\n    this.store = {};\n\n    for (let name in store) {\n      this.set(name, store[name]);\n    }\n  }\n\n  get (name) {\n    return this.store[name];\n  }\n\n  set (name, value) {\n    this.store[name] = value;\n\n    Object.defineProperty(this.app, name, {\n      get: () => {\n        return this.get(name);\n      }\n    });\n\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/registry.js","   \r\n                           \r\n  \r\n                                                                      \r\n                                    \r\n   \r\n\r\nimport Sparrow from \"./sparrow\";\r\nimport { inBrowser } from \"./util/environment\";\r\n\r\nif (inBrowser) {\r\n  let $ = window.jQuery || window.Zepto || window.$ || null;\r\n\r\n  if ($) {\r\n    Sparrow.$ = $;\r\n  }\r\n}\r\n\r\nexport default Sparrow;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}